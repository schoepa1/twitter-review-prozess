<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1lvz53z" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="2.0.1">
  <bpmn:collaboration id="MitarbeiterKuerzelGenerieren">
    <bpmn:participant id="Participant_18e1752" name="Verarbeitung von Tweet-Anfragen" processRef="VerarbeitungVonTweetAnfragen" />
  </bpmn:collaboration>
  <bpmn:process id="VerarbeitungVonTweetAnfragen" name="Verarbeitung von Tweet-Anfragen" isExecutable="true">
    <bpmn:laneSet id="LaneSet_07kaiz4">
      <bpmn:lane id="Lane_0c9xdey" name="Mitarbeiter">
        <bpmn:flowNodeRef>TweetAnfrageEingereicht</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>TweetAnfrageUeberarbeiten</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>TimeBoundary_TweetAnfrageUeberarbeite</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1iir6w0" name="Kommunikationsabteilung">
        <bpmn:flowNodeRef>ExclusiveGateway_1qa6x80</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_0gfe4vb</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>TweetAnfragePruefen</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>TimeBoundary_TweetAnfragePruefen</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1d0re29" name="Automatisch">
        <bpmn:flowNodeRef>Pruefergebnis</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_0fj9kmh</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>TweetAnfrageBehandelt</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>TweetSenden</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>MitarbeiterBenachrichtigen</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:sequenceFlow id="SequenceFlow_1vqcip2" sourceRef="TweetAnfrageEingereicht" targetRef="Task_0gfe4vb" />
    <bpmn:startEvent id="TweetAnfrageEingereicht" name="Tweet-Anfrage&#10;eingereicht" camunda:asyncAfter="true" camunda:initiator="anfrageStellenderBenutzer">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="email" label="E-Mail" type="string" />
          <camunda:formField id="tweetContent" label="Zu veröffentlichender Text" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:outgoing>SequenceFlow_1vqcip2</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1qa6x80">
      <bpmn:incoming>SequenceFlow_17z2tfh</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1r55xi0</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0glyf4v</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Pruefergebnis" name="Prüf-&#10;ergebnis?" default="Genehmigt">
      <bpmn:incoming>SequenceFlow_1rlwf8z</bpmn:incoming>
      <bpmn:outgoing>Abgelehnt</bpmn:outgoing>
      <bpmn:outgoing>Genehmigt</bpmn:outgoing>
      <bpmn:outgoing>ZuUeberarbeiten</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0fj9kmh">
      <bpmn:incoming>SequenceFlow_13w0jnd</bpmn:incoming>
      <bpmn:incoming>Abgelehnt</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_02cqhmw</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0munet7</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0akgqts</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="TweetAnfrageBehandelt" name="Tweet-Anfrage&#10;behandelt">
      <bpmn:incoming>SequenceFlow_0wkf2cr</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="TweetAnfrageUeberarbeiten" name="Tweet-Anfrage überarbeiten" camunda:assignee="${anfrageStellenderBenutzer}" camunda:candidateGroups="kommunikationsabteilung">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="tweetContent" label="Zu veröffentlichender Text" type="string" />
          <camunda:formField id="checkResultComment" label="Hinweise für Mitarbeiter zum Prüfergebnis" type="string">
            <camunda:properties>
              <camunda:property id="disabled" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>ZuUeberarbeiten</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_17z2tfh</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_17z2tfh" sourceRef="TweetAnfrageUeberarbeiten" targetRef="ExclusiveGateway_1qa6x80" />
    <bpmn:sequenceFlow id="SequenceFlow_0glyf4v" sourceRef="ExclusiveGateway_1qa6x80" targetRef="TweetAnfragePruefen" />
    <bpmn:sequenceFlow id="Abgelehnt" name="abgelehnt" sourceRef="Pruefergebnis" targetRef="ExclusiveGateway_0fj9kmh">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{checkResult == 'rejected'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Genehmigt" name="genehmigt" sourceRef="Pruefergebnis" targetRef="TweetSenden" />
    <bpmn:sequenceFlow id="ZuUeberarbeiten" name="zu überarbeiten" sourceRef="Pruefergebnis" targetRef="TweetAnfrageUeberarbeiten">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{checkResult == 'revisable'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_13w0jnd" sourceRef="TweetSenden" targetRef="ExclusiveGateway_0fj9kmh" />
    <bpmn:sequenceFlow id="SequenceFlow_0akgqts" sourceRef="ExclusiveGateway_0fj9kmh" targetRef="MitarbeiterBenachrichtigen" />
    <bpmn:sequenceFlow id="SequenceFlow_0wkf2cr" sourceRef="MitarbeiterBenachrichtigen" targetRef="TweetAnfrageBehandelt" />
    <bpmn:sequenceFlow id="SequenceFlow_1r55xi0" sourceRef="Task_0gfe4vb" targetRef="ExclusiveGateway_1qa6x80" />
    <bpmn:scriptTask id="Task_0gfe4vb" name="Mitarbeiter Kürzel generieren" scriptFormat="Javascript">
      <bpmn:incoming>SequenceFlow_1vqcip2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1r55xi0</bpmn:outgoing>
      <bpmn:script>emailAdress = execution.getVariable("email");
var alias = emailAdress.substring(0,4);
execution.setVariable("alias",alias);</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:serviceTask id="TweetSenden" name="Tweet senden" camunda:asyncBefore="true" camunda:delegateExpression="#{sendTweetAdapter}">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="KPI-Ratio" value="Tweet Rejected" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Genehmigt</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_13w0jnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="MitarbeiterBenachrichtigen" name="Mitarbeiter benachrichtigen" camunda:delegateExpression="#{notifyEmployeeAdapter}">
      <bpmn:incoming>SequenceFlow_0akgqts</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0wkf2cr</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:userTask id="TweetAnfragePruefen" name="Tweet-Anfrage prüfen" camunda:candidateGroups="kommunikationsabteilung">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="email" label="E-Mail" type="string" />
          <camunda:formField id="tweetContent" label="Zu veröffentlichender Text" type="string" />
          <camunda:formField id="checkResult" label="Prüfergebnis" type="enum">
            <camunda:value id="accepted" name="Genehmigt" />
            <camunda:value id="revisable" name="Zur Überarbeitung" />
            <camunda:value id="rejected" name="Abgelehnt" />
          </camunda:formField>
          <camunda:formField id="checkResultComment" label="Hinweise für Mitarbeiter zum Prüfergebnis" type="string" />
          <camunda:formField id="alias" label="Mitarbeiter-Kürzel" type="string">
            <camunda:properties>
              <camunda:property id="disabled" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0glyf4v</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1rlwf8z</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_1rlwf8z" sourceRef="TweetAnfragePruefen" targetRef="Pruefergebnis" />
    <bpmn:boundaryEvent id="TimeBoundary_TweetAnfragePruefen" name="3 Tage abgelaufen" attachedToRef="TweetAnfragePruefen">
      <bpmn:extensionElements>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="Javascript">execution.setVariable("mailMainPart","Dieser konnte nicht veröffentlicht werden, weil er nicht durch die Kommunikationsabteilung innert 3 Tagen geprüft wurde.");</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:outgoing>SequenceFlow_02cqhmw</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT10S</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="SequenceFlow_02cqhmw" sourceRef="TimeBoundary_TweetAnfragePruefen" targetRef="ExclusiveGateway_0fj9kmh" />
    <bpmn:boundaryEvent id="TimeBoundary_TweetAnfrageUeberarbeite" name="3 Tage abgelaufen" attachedToRef="TweetAnfrageUeberarbeiten">
      <bpmn:extensionElements>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="Javascript">execution.setVariable("mailMainPart","Dieser konnte nicht veröffentlicht werden, weil Du nicht innert 3 Tagen diesen überarbeitet hast.");</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:outgoing>SequenceFlow_0munet7</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT10S</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0munet7" sourceRef="TimeBoundary_TweetAnfrageUeberarbeite" targetRef="ExclusiveGateway_0fj9kmh" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="MitarbeiterKuerzelGenerieren">
      <bpmndi:BPMNShape id="Participant_18e1752_di" bpmnElement="Participant_18e1752">
        <dc:Bounds x="2" y="1" width="1155" height="517" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1qa6x80_di" bpmnElement="ExclusiveGateway_1qa6x80" isMarkerVisible="true">
        <dc:Bounds x="338" y="187" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_0ki59ak_di" bpmnElement="TweetAnfrageEingereicht">
        <dc:Bounds x="100" y="63" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="83" y="30" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0cvdrda_di" bpmnElement="Pruefergebnis" isMarkerVisible="true">
        <dc:Bounds x="587" y="326" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="556" y="368" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0fj9kmh_di" bpmnElement="ExclusiveGateway_0fj9kmh" isMarkerVisible="true">
        <dc:Bounds x="822" y="326" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_09yuv1z_di" bpmnElement="TweetAnfrageBehandelt">
        <dc:Bounds x="1082" y="333" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1065" y="376" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0wkf2cr_di" bpmnElement="SequenceFlow_0wkf2cr">
        <di:waypoint x="1023" y="351" />
        <di:waypoint x="1082" y="351" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_13w0jnd_di" bpmnElement="SequenceFlow_13w0jnd">
        <di:waypoint x="778" y="458" />
        <di:waypoint x="847" y="458" />
        <di:waypoint x="847" y="376" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0akgqts_di" bpmnElement="SequenceFlow_0akgqts">
        <di:waypoint x="872" y="351" />
        <di:waypoint x="923" y="351" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0iwyrih_di" bpmnElement="Abgelehnt">
        <di:waypoint x="637" y="351" />
        <di:waypoint x="822" y="351" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="645" y="331" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0glyf4v_di" bpmnElement="SequenceFlow_0glyf4v">
        <di:waypoint x="388" y="212" />
        <di:waypoint x="427" y="212" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1vqcip2_di" bpmnElement="SequenceFlow_1vqcip2">
        <di:waypoint x="118" y="99" />
        <di:waypoint x="118" y="212" />
        <di:waypoint x="170" y="212" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0gmvlus_di" bpmnElement="Genehmigt">
        <di:waypoint x="612" y="376" />
        <di:waypoint x="612" y="458" />
        <di:waypoint x="678" y="458" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="616" y="438" width="53" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_123e4w3_di" bpmnElement="ZuUeberarbeiten">
        <di:waypoint x="612" y="326" />
        <di:waypoint x="612" y="81" />
        <di:waypoint x="656" y="81" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="579" y="61" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Lane_0c9xdey_di" bpmnElement="Lane_0c9xdey">
        <dc:Bounds x="32" y="1" width="1125" height="140" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1iir6w0_di" bpmnElement="Lane_1iir6w0">
        <dc:Bounds x="32" y="141" width="1125" height="143" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1d0re29_di" bpmnElement="Lane_1d0re29">
        <dc:Bounds x="32" y="284" width="1125" height="234" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0k2l04a_di" bpmnElement="TweetAnfrageUeberarbeiten">
        <dc:Bounds x="656" y="41" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_17z2tfh_di" bpmnElement="SequenceFlow_17z2tfh">
        <di:waypoint x="706" y="41" />
        <di:waypoint x="706" y="22" />
        <di:waypoint x="363" y="22" />
        <di:waypoint x="363" y="187" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1r55xi0_di" bpmnElement="SequenceFlow_1r55xi0">
        <di:waypoint x="270" y="212" />
        <di:waypoint x="338" y="212" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ScriptTask_084pizh_di" bpmnElement="Task_0gfe4vb">
        <dc:Bounds x="170" y="172" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0xify65_di" bpmnElement="TweetSenden">
        <dc:Bounds x="678" y="418" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_0cto6lx_di" bpmnElement="MitarbeiterBenachrichtigen">
        <dc:Bounds x="923" y="311" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1x5gay3_di" bpmnElement="TweetAnfragePruefen">
        <dc:Bounds x="427" y="172" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1rlwf8z_di" bpmnElement="SequenceFlow_1rlwf8z">
        <di:waypoint x="527" y="212" />
        <di:waypoint x="555" y="212" />
        <di:waypoint x="555" y="351" />
        <di:waypoint x="587" y="351" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BoundaryEvent_1g7nz2h_di" bpmnElement="TimeBoundary_TweetAnfragePruefen">
        <dc:Bounds x="440" y="234" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="390" y="253" width="55" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_02cqhmw_di" bpmnElement="SequenceFlow_02cqhmw">
        <di:waypoint x="458" y="270" />
        <di:waypoint x="458" y="507" />
        <di:waypoint x="925" y="507" />
        <di:waypoint x="859" y="365" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BoundaryEvent_0t8fj7p_di" bpmnElement="TimeBoundary_TweetAnfrageUeberarbeite">
        <dc:Bounds x="671" y="103" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="662" y="146" width="55" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0munet7_di" bpmnElement="SequenceFlow_0munet7">
        <di:waypoint x="705" y="128" />
        <di:waypoint x="847" y="194" />
        <di:waypoint x="847" y="326" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
